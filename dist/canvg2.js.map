{"version":3,"file":"canvg2.js","sources":["../src/property/Property.ts","../src/Attribute.ts","../src/Attributes.ts","../src/AbstractElements.ts","../src/elements/ElementsDummy.ts","../src/elements/ElementsSvg.ts","../src/ElementsFactory.ts","../src/CanVG2.ts"],"sourcesContent":["export class Property {\n  constructor(protected _value: string) {\n  }\n\n  get value(): any {\n    return this._value;\n  }\n\n  toString() {\n    return this._value;\n  }\n}\n","import {Property} from \"./property/Property\";\nimport {IAttributes} from \"./types/IAttributes\";\n\nexport class Attribute {\n  name: string;\n  value: Property;\n\n  constructor(name: keyof IAttributes, value: string) {\n    this.name = name;\n    this.value = this.getValue(value);\n  }\n\n  private getValue(value: string) {\n    switch (this.name) {\n      default:\n        return new Property(value);\n    }\n  }\n}\n","import {Attribute} from \"./Attribute\";\nimport {IAttributes} from \"./types/IAttributes\";\n\nexport class Attributes {\n  private attributes: { [key: string]: Attribute } = {};\n\n  constructor(attributes: NamedNodeMap) {\n    this.fillAttributes(attributes);\n  }\n\n  static create(attributes: NamedNodeMap): Record<keyof IAttributes, Attribute | undefined> {\n    // @ts-ignore\n    const attrs = new Attributes(attributes) as IAttributes;\n\n    // @ts-ignore\n    return new Proxy(attrs, {\n      get(target: Attributes, name: keyof IAttributes) {\n        return target.get(name);\n      },\n    });\n  }\n\n  get(name: keyof IAttributes) {\n    return this.attributes[name];\n  }\n\n  private fillAttributes(attributes: NamedNodeMap) {\n    this.attributes = Array.from(attributes)\n      .reduce((memo, attribute) => {\n        const {name, value} = attribute;\n        memo[name] = new Attribute(name as keyof IAttributes, value);\n        return memo;\n      }, this.attributes);\n  }\n}\n","import {Attribute} from \"./Attribute\";\nimport {Attributes} from \"./Attributes\";\nimport {IAttributes} from \"./types/IAttributes\";\n\nexport class AbstractElements {\n  // static create: (element: HTMLElement) => (ElementsSvg | ElementsDummy);\n  root: boolean = false;\n  attributes: Record<keyof IAttributes, Attribute | undefined>;\n  children: AbstractElements[];\n\n  constructor(private element: HTMLElement) {\n    this.getAttributes();\n  }\n\n  private getAttributes() {\n    this.attributes = Attributes.create(this.element.attributes);\n  }\n}\n","import {AbstractElements} from \"../AbstractElements\";\n\nexport class ElementsDummy extends AbstractElements {\n\n}\n","import {AbstractElements} from \"../AbstractElements\";\n\nexport class ElementsSvg extends AbstractElements {\n\n}\n","import {ElementsDummy, ElementsSvg} from \"./elements\";\n\nexport class ElementsFactory {\n  static create(element: HTMLElement) {\n    let newElement: any;\n\n    switch (element.nodeName) {\n      case \"svg\":\n        newElement = new ElementsSvg(element);\n        break;\n      default:\n        console.warn(`Unknown element ${element.nodeName}`);\n        newElement = new ElementsDummy(element);\n        break;\n    }\n\n    newElement.children = ElementsFactory.getChildren(element);\n    return newElement;\n  }\n\n  static getChildren(element: HTMLElement) {\n    return Array.from(element.children)\n      .map(child => ElementsFactory.create(child as HTMLElement));\n  }\n}\n","import {AbstractElements} from \"./AbstractElements\";\nimport {ElementsFactory} from \"./ElementsFactory\";\n\nexport class CanVG2 {\n  rootElement: AbstractElements;\n  context: CanvasRenderingContext2D;\n  private canvas: HTMLCanvasElement;\n  private source: XMLDocument;\n\n  constructor(canvas: HTMLCanvasElement, svg: XMLDocument) {\n    this.canvas = canvas;\n    const context = this.canvas.getContext(\"2d\");\n    if (!context) {\n      throw new Error(\"Can`t get context from target\");\n    }\n\n    this.context = context;\n    this.source = svg;\n\n    this.parseXml();\n  }\n\n  draw() {\n    // this.rootElement.render(this.context);\n  }\n\n  private parseXml() {\n    this.rootElement = ElementsFactory.create(this.source.documentElement);\n    this.rootElement.root = true;\n  }\n\n}\n"],"names":["tslib_1.__extends"],"mappings":"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"}